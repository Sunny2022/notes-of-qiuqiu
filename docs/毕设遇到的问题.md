```python
ValueError: column index (256) not an int in range(256)
    #解决：因为pandas内部调用了xlwt模块，而图示可知，该模块最大列只支持255列，所以在保存数据时，一旦超过这个值就会报错，博主建议改用其他模块进行数据保存，比如xlsxwriter模块。
    
    #好像不转换dataframe为ndarray又不报错了
```



[pandas中关于set_index和reset_index的用法]: https://lover.blog.csdn.net/article/details/78162758?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1.pc_relevant_antiscanv2&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1.pc_relevant_antiscanv2&amp;utm_relevant_index=1


t1.py : Molecular_Descriptor.xlsx去除全0列后：[1974 rows x 504 columns]  Molecular_Descriptor__mod.xlsx

```python
ValueError: n_components=20 must be between 0 and min(n_samples, n_features)=8 with svd_solver='full'
#PCA设置的参数n_components必须 <= min(样本量，特征量).
#个人从sklearn实现的方式——通过SVD，来理解：m X n的矩阵，秩为min(m,n)，最终的奇异值个数也必须<=min(m,n)，对应的特征向量维数也要<=min(m,n)
```

[scikit-learn中的主成分分析（PCA）的使用]: https://www.cnblogs.com/eczhou/p/5433856.html



[NumPy中的ndarray与Pandas的Series和DataFrame之间的区别与转换 - 真格量化的文章 - 知乎]: https://zhuanlan.zhihu.com/p/83660582

1. **ndarray数组对象**

NumPy中的ndarray是一个多维数组对象，ndarray中的所有元素的类型都是相同的，在存储元素时内存可以连续，在科学计算中，Numpy的ndarray就可以省掉很多循环语句，代码使用方面比Python原生list简单的多。

2. **Series对象**

从一般意义上来讲， Series 可以简单地被认为是一维的数组。Series 和一维数组最主要的区别在于 Series 类型具有索引（ index ）。Series支持从列表和字典创建

3. **DataFrame对象**

DataFrame 是将数个 Series 按列合并而成的二维数据结构，每一列单独取出来是一个 Series ，这和SQL数据库中取出的数据是很类似的。所以，按列对一个 DataFrame 进行处理更为方便



## 2022-4-6

### numpy中的max()函数

```python
ndarray.max([int axis])

#函数功能：求ndarray中指定维度的最大值，默认求所有值的最大值。

#axis=0:求各column的最大值

#axis=1:求各row的最大值
```

### list或numpy数组中最大元素及其对应的索引

#### list

对于列表来说，可直接使用max()\min()或者list.index()来求得列表中最大和最小元素以及该元素的索引值：

```python
a = [1,2,3,4,5]
print(max(a))
print(min(a))
print(a.index(max(a)))
print(a.index(min(a)))
#输出
5
1
4
0
```

#### numpy.ndarray

对于numpy的数组，可直接使用np.max()\np.min()或者np.argmax()\np.argmin()来分别求得数组中最大、最小元素及其对应的索引值。

```python
import numpy as np
a = [1,2,3,4,5]
arr_a = np.array(a)
print(np.max(a))
print(np.min(a))
print(np.argmax(arr_a ))
print(np.argmin(arr_a ))
#输出
5
1
4
0

```

#### 二维矩阵

对于二维矩阵，可以定方向（是求每行的最大值还是求每列的最大值，结果也是一个ndarray）

```python
np.max(a,axis=0) #每列最大

np.max(a,axis=1) #每行最大

#附：
#list和numpy array相互转化的函数：
#list转array：
arr_a = np.array(a)
#array转list:
a_list = a.tolist()
```

### StandardScaler的transform和fit_transform方法

**StandardScaler**类是一个用来讲数据进行归一化和标准化的类。
归一化和标准化，即应用下列公式：
![X=(x-\mu)/\sigma](https://math.jianshu.com/math?formula=X%3D(x-%5Cmu)%2F%5Csigma)
使得新的X数据集方差为1，均值为0

- #### StandardScaler类中transform和fit_transform方法有什么区别？

fit_transform方法是fit和transform的结合，fit_transform(X_train) 意思是找出X_train的![\mu](https://math.jianshu.com/math?formula=%5Cmu)和![\sigma](https://math.jianshu.com/math?formula=%5Csigma)，并应用在X_train上。
 这时对于X_test，我们就可以直接使用transform方法。因为此时StandardScaler已经保存了X_train的
 ![\mu](https://math.jianshu.com/math?formula=%5Cmu)和![\sigma](https://math.jianshu.com/math?formula=%5Csigma)。

- #### 为什么可以用训练集的![\mu](https://math.jianshu.com/math?formula=%5Cmu)和![\sigma](https://math.jianshu.com/math?formula=%5Csigma) 来transform 测试集的数据X_test?

机器学习中有很多假设，这里假设了训练集的样本采样足够充分?
