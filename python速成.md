# 刘二大人网课

## P02 数据类型

浮点数可以求余

浮点数有误差，不能轻易去比较两个浮点数大小

整数可以非常长

int：+ - * / // %

complex:  

```
x=3+2j
y=4-3j
x*y
Out[1]: (18-1j)
x/y
Out[2]: (0.24+0.68j)
```

字符串：三重双引号（或单引号）写大段注释，用len(s) 函数时 中文和英文一样算一个字符。（默认unicode编码）

```
s='中文abc'
len(s)
Out[1]: 5
print(s)
中文abc
s=s+'def'
s
Out[2]: '中文abcdef'
s=s+str(22)       #str() ：转字符串函数
s
Out[3]: '中文abcdef22'
 
isinstance(s,int)
Out[4]: False      #判断基本数据类型
isinstance(s,str)
Out[5]: True
 
s1="hello"
s2="hello"
s1==s2
Out[6]: True
s1 is s2       #所有变量都是对数据对象的引用（c中的指针）
Out[7]: True
id(s1)
Out[8]: 2065665768752
id(s2)
Out[9]: 2065665768752
```

bool类型：

```
bool('True')
Out[1]: True
bool('cysd')
Out[2]: True
bool(1)
Out[3]: True
bool('')
Out[4]: False
bool(0)
Out[5]: False
```



## P03 序列类型 list、turple

https://docs.python.org/zh-cn/3.8/library/stdtypes.html#sequence-types-list-tuple-range

list——列表

数量可扩充 .append

```python
x=[1,2,3]
type(x)
Out[1]: list
x.append(4)
x.append(5)
x
Out[2]: [1, 2, 3, 4, 5]
                #注意下面！
x=[1,2,3,2]
x
Out[1]: [1, 2, 3, 2]
x[1]
Out[2]: 2
x[3]
Out[3]: 2
    
x[1] is x[3]
Out[4]: True  #引用
```

```
#注意下面两者的区别
#一：
x=[[]]*3
x
Out[1]: [[], [], []]
x[1].append(2)
x
Out[2]: [[2], [2], [2]]
#二：
x=[[],[],[]]
x[1].append(2)
x
Out[3]: [[], [2], []]

x=[1,2,3,4]
x[-1]
Out[1]: 4  #倒数第一个元素
x[-2]
Out[2]: 3
#切片构造新列表，改变引用不会影响原始列表
y=x[1:3]
y
Out[3]: [2, 3]   #要第一个第二个，不要第三个
x[0:4:2]
Out[4]: [1, 3]   #要第0个和第二个元素（0,2,4）
```

turple——元组

可看做list列表的常量形式，是只读的

range

## P04 字符串类型

字符串对象是只读的！https://docs.python.org/zh-cn/3.8/library/stdtypes.html#text-sequence-type-str

a. 定义

‘’ “” 三重引号 

转义字符\  字符串前缀r

b. 格式化

1. +

2. % （ 类似c中的printf("%d",12); ）

```
msg='%10s is %d years old.'
pattern=msg%('Tom',12)
pattern
Out[1]: '       Tom is 12 years old.'
```

3. format( , , )

```
msg='{:d}+{:d}={:d}'.format(1,21,1+21)
msg
Out[1]: '1+21=22'
msg='{1:d}+{0:d}={2:d}'.format(1,21,1+21)
msg
Out[2]: '21+1=22'
msg='{1:d}+{1:d}+{1:d}+{0:d}'.format(10,0)  #只需要两个参数
msg
Out[3]: '0+0+0+10'
```

4. f前缀——3.7以上新增

```
name,age
Out[1]: ('Mike', 12)
f'{name} is {age} years old.'
Out[2]: 'Mike is 12 years old.'
```

## P05 结构控制语句 P

​		if （迭代器）

a. 浮点数不要==比较

b. 注意 is ==

c. 与 && and  

​	或 || or  

​	非 ！ not  

​	（in 、 not in 、is 、is not）

## P06 字典

key-value

hashable key : int/float/bool/str/turple 

D[key]/D.get[key]

## P07 函数

**first class:**

变量引用

参数传递

加入到集合

可以作为返回值

lambda单行函数

## P09 文件处理



# 切片

## https://www.jianshu.com/p/15715d6f4dad



#### 一、 Python可切片对象的索引方式

包括：正索引和负索引两部分，如下图所示，以list对象a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]为例：

![img](https://upload-images.jianshu.io/upload_images/14029140-3da45bbfe1029df4.jpg?imageMogr2/auto-orient/strip|imageView2/2/format/webp)



#### 二、  Python切片操作的一般方式

一个完整的切片表达式包含两个“:”，用于分隔三个参数(start_index、end_index、step)。当只有一个“:”时，默认第三个参数step=1；当一个“:”也没有时，start_index=end_index，表示切取start_index指定的那个元素。

```python
#切片操作基本表达式：
object[start_index:end_index:step]
#step：正负数均可，其绝对值大小决定了切取数据时的“步长”，而正负号决定了“切取方向”
##正表示“从左往右”取值，负表示“从右往左”取值。
##当step省略时，默认为1。

#start_index：表示起始索引（包含该索引对应值）；
##缺省表示从对象“端点”开始取值，至于是，
##step参数的正负决定从“起点”还是从“终点”开始，step为正从“起点”开始，为负从“终点”开始。

#end_index：表示终止索引（不包含该索引对应值）；
##缺省表示一直取到数据“端点”，
##step参数的正负决定是到“起点”还是到“终点”，step为正时直到“终点”，为负时直到“起点”。
```

#### 三、 Python切片操作——例子

以下示例均以list对象a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]为例：

```python
>>>a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

1. 切取单个元素
>>>a[0]
>>>0
>>>a[-4]
>>>6
当索引只有一个数时，表示切取某一个元素。

2. 切取完整对象
>>>a[:] #从左往右
>>> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>>a[::]#从左往右
>>> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>>a[::-1]#从右往左
>>> [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]

3. start_index和end_index全为正（+）索引的情况
>>>a[1:6]
>>> [1, 2, 3, 4, 5]
#step=1，从左往右取值，start_index=1到end_index=6同样表示从左往右取值。

>>>a[1:6:-1]
>>> []
#输出为空列表，说明没取到数据。
#step=-1，决定了从右往左取值，而start_index=1到end_index=6决定了从左往右取值，两者矛盾，所以为空。

>>>a[6:2]
>>> []
#同样输出为空列表。
#step=1，决定了从左往右取值，而start_index=6到end_index=2决定了从右往左取值，两者矛盾，所以为空。

>>>a[:6]
>>> [0, 1, 2, 3, 4, 5]
#step=1，表示从左往右取值，而start_index省略时，表示从端点开始，因此这里的端点是“起点”，即从“起点”值0开始一直取到end_index=6（该点不包括）。

>>>a[:6:-1]
>>> [9, 8, 7]
#step=-1，从右往左取值，而start_index省略时，表示从端点开始，因此这里的端点是“终点”，即从“终点”值9开始一直取到end_index=6（该点不包括）。

>>>a[6:]
>>> [6, 7, 8, 9]
#step=1，从左往右取值，从start_index=6开始，一直取到“终点”值9。

>>>a[6::-1]
>>> [6, 5, 4, 3, 2, 1, 0]
#step=-1，从右往左取值，从start_index=6开始，一直取到“起点”0。

4. start_index和end_index全为负（-）索引的情况

>>>a[-1:-6]
>>> []
#step=1，从左往右取值，而start_index=-1到end_index=-6决定了从右往左取值，两者矛盾，所以为空。

>>>a[-1:-6:-1]
>>> [9, 8, 7, 6, 5]
#step=-1，从右往左取值，start_index=-1到end_index=-6同样是从右往左取值。

>>>a[-6:-1]
>>> [4, 5, 6, 7, 8]
#step=1，从左往右取值，而start_index=-6到end_index=-1同样是从左往右取值。

>>>a[:-6]
>>> [0, 1, 2, 3]
#step=1，从左往右取值，从“起点”开始一直取到end_index=-6（该点不包括）。

>>>a[:-6:-1]
>>> [9, 8, 7, 6, 5]
#step=-1，从右往左取值，从“终点”开始一直取到end_index=-6（该点不包括）。

>>>a[-6:]
>>> [4, 5, 6, 7, 8, 9]
#step=1，从左往右取值，从start_index=-6开始，一直取到“终点”。

>>>a[-6::-1]
>>> [4, 3, 2, 1, 0]
#step=-1，从右往左取值，从start_index=-6开始，一直取到“起点”。

5. start_index和end_index正（+）负（-）混合索引的情况

>>>a[1:-6]
>>> [1, 2, 3]
#start_index=1在end_index=-6的左边，因此从左往右取值，而step=1同样决定了从左往右取值，因此结果正确

>>>a[1:-6:-1]
>>> []
#start_index=1在end_index=-6的左边，因此从左往右取值，但step=-则决定了从右往左取值，两者矛盾，因此为空。

>>>a[-1:6]
>>> []
#start_index=-1在end_index=6的右边，因此从右往左取值，但step=1则决定了从左往右取值，两者矛盾，因此为空。

>>>a[-1:6:-1]
>>> [9, 8, 7]
#start_index=-1在end_index=6的右边，因此从右往左取值，而step=-1同样决定了从右往左取值，因此结果正确。

6. 多层切片操作

>>>a[:8][2:5][-1:]
>>> [4]
相当于：
a[:8]=[0, 1, 2, 3, 4, 5, 6, 7]
a[:8][2:5]= [2, 3, 4]
a[:8][2:5][-1:] = [4]
理论上可无限次多层切片操作，只要上一次返回的是非空可切片对象即可。

7. 切片操作的三个参数可以用表达式

>>>a[2+1:3*2:7%3]
>>> [3, 4, 5]
即：a[2+1:3*2:7%3] = a[3:6:1]

8. 其他对象的切片操作
前面的切片操作以list对象为例进行说明，但实际上可进行切片操作的数据类型还有很多，包括元组、字符串等等

>>> (0, 1, 2, 3, 4, 5)[:3]
>>> (0, 1, 2)
#元组的切片操作

>>>'ABCDEFG'[::2]
>>>'ACEG'
#字符串的切片操作

>>>for i in range(1,100)[2::3][-5:]: 
       print(i)
>>>87
90
93
96
99
#就是利用range()函数生成1-99的整数，然后从start_index=2（即3）开始以step=3取值，直到终点，再在新序列中取最后五个数。


```

#### 四、 常用切片操作

```python
1.取偶数位置
>>>b = a[::2]
[0, 2, 4, 6, 8]

2.取奇数位置
>>>b = a[1::2]
[1, 3, 5, 7, 9]

3.拷贝整个对象
>>>b = a[:] #
>>>print(b) #[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>>print(id(a)) #41946376
>>>print(id(b)) #41921864
或
>>>b = a.copy()
>>>print(b) #[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>>print(id(a)) #39783752
>>>print(id(b)) #39759176
#需要注意的是：[:]和.copy()都属于“浅拷贝”，只拷贝最外层元素，内层嵌套元素则通过引用方式共享，而非独立分配内存，如果需要彻底拷贝则需采用“深拷贝”方式，如下例所示：
>>>a = [1,2,['A','B']]
>>>print('a={}'.format(a))
>>>b = a[:]
>>>b[0] = 9 #修改b的最外层元素，将1变成9
>>>b[2][0] = 'D' #修改b的内嵌层元素
>>>print('a={}'.format(a))
>>>print('b={}'.format(b))
>>>print('id(a)={}'.format(id(a)))
>>>print('id(b)={}'.format(id(b)))
a=[1, 2, ['A', 'B']] #原始a
a=[1, 2, ['D', 'B']] #b修改内部元素A为D后，a中的A也变成了D，说明共享内部嵌套元素，但外部元素1没变。
b=[9, 2, ['D', 'B']] #修改后的b
id(a)=38669128
id(b)=38669192

4.修改单个元素
>>>a[3] = ['A','B']
[0, 1, 2, ['A', 'B'], 4, 5, 6, 7, 8, 9]

5.在某个位置插入元素
>>>a[3:3] = ['A','B','C']
[0, 1, 2, 'A', 'B', 'C', 3, 4, 5, 6, 7, 8, 9]
>>>a[0:0] = ['A','B']
['A', 'B', 0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

6.替换一部分元素
>>>a[3:6] = ['A','B']
[0, 1, 2, 'A', 'B', 6, 7, 8, 9]
```

#### 五、 需要注意

- “取单个元素（不带“:”）”时，返回的是对象的某个元素，其**类型由元素本身的类型决定**，而与母对象无关，如上面的a[0]=0、a[-4]=6，元素0和6都是“数值型”，而母对象a却是“list”型；

- “取连续切片（带“:”）”时，返回结果的**类型与母对象相同**，哪怕切取的连续切片只包含一个元素，如上面的a[-1:]=[9]，返回的是一个只包含元素“9”的list，而非数值型“9”。